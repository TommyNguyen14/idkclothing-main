{% comment %}
  Renders a megamenu for the header.

  Usage:
  {% render 'header-mega-menu' %}
{% endcomment %}

<nav class="header__inline-menu">
  <ul class="list-menu list-menu--inline" role="list">
    <!-- SHOP Dropdown -->
    <li>
      <header-menu>
        <details id="Details-HeaderMenu-Shop" class="mega-menu">
          <summary
            id="HeaderMenu-Shop"
            class="header__menu-item list-menu__item link focus-inset"
          >
            <span class="header__active-menu-item">
              SHOP
            </span>
            {{- 'icon-caret.svg' | inline_asset_content -}}
          </summary>
          <div
            id="MegaMenu-Content-Shop"
            class="mega-menu__content color-{{ section.settings.menu_color_scheme }} gradient motion-reduce global-settings-popup"
            tabindex="-1"
          >
            <div class="mega-menu__layout page-width">
              <!-- Left Column -->
              <div class="mega-menu__column">
                <a href="/collections/all" class="mega-menu__link mega-menu__link--level-2 link">
                  SHOP ALL â†’
                </a>
                <a href="/collections/hoodies" class="mega-menu__link mega-menu__link--level-2 link">
                  HOODIES
                </a>
                <a href="/collections/denim" class="mega-menu__link mega-menu__link--level-2 link">
                  DENIM
                </a>
                <a href="/collections/basics" class="mega-menu__link mega-menu__link--level-2 link">
                  BASICS
                </a>
              </div>
              <!-- Right Column -->
              <div class="mega-menu__column">
                <a href="/collections/knitwear" class="mega-menu__link mega-menu__link--level-2 link">
                  KNITWEAR
                </a>
                <a href="/collections/tees" class="mega-menu__link mega-menu__link--level-2 link">
                  TEES
                </a>
                <a href="/collections/bottoms" class="mega-menu__link mega-menu__link--level-2 link">
                  BOTTOMS
                </a>
                <a href="/collections/small-goods" class="mega-menu__link mega-menu__link--level-2 link">
                  SMALL GOODS
                </a>
              </div>
            </div>
            
            <!-- Featured Products Section -->
            <div class="mega-menu__featured page-width">
              <div class="mega-menu__featured-header">
                <h3 class="mega-menu__featured-title">BEST SELLERS</h3>
              </div>
              <div class="mega-menu__featured-grid">
                {%- for product in collections.best-sellers.products limit: 4 -%}
                  <div class="mega-menu__product-card">
                    <a href="{{ product.url }}" class="mega-menu__product-link">
                      <div class="mega-menu__product-image">
                        {%- if product.featured_media -%}
                          <img
                            src="{{ product.featured_media | image_url: width: 200 }}"
                            alt="{{ product.featured_media.alt | escape }}"
                            class="mega-menu__product-img"
                            loading="lazy"
                            width="200"
                            height="200"
                          >
                          {%- if product.media[1] != null -%}
                            <img
                              src="{{ product.media[1] | image_url: width: 200 }}"
                              alt="{{ product.media[1].alt | escape }}"
                              class="mega-menu__product-img mega-menu__product-img--hover"
                              loading="lazy"
                              width="200"
                              height="200"
                            >
                          {%- endif -%}
                        {%- else -%}
                          <div class="mega-menu__product-placeholder">
                            {{ 'product-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
                          </div>
                        {%- endif -%}
                      </div>
                      <div class="mega-menu__product-info">
                        <h4 class="mega-menu__product-title">{{ product.title | escape }}</h4>
                        <div class="mega-menu__product-price">
                          <span class="price">{{ product.price | money_with_currency }}</span>
                        </div>
                      </div>
                    </a>
                  </div>
                {%- else -%}
                  <!-- Fallback products when no best sellers collection exists -->
                  {%- for i in (1..4) -%}
                    <div class="mega-menu__product-card">
                      <div class="mega-menu__product-image">
                        <div class="mega-menu__product-placeholder">
                          {{ 'product-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
                        </div>
                      </div>
                      <div class="mega-menu__product-info">
                        <h4 class="mega-menu__product-title">Example Product Title</h4>
                        <div class="mega-menu__product-price">
                          <span class="price">$19.99 USD</span>
                        </div>
                      </div>
                    </div>
                  {%- endfor -%}
                {%- endfor -%}
              </div>
            </div>
          </div>
        </details>
      </header-menu>
    </li>
    
    <!-- FAQ Link -->
    <li>
      <a
        id="HeaderMenu-FAQ"
        href="/pages/faq"
        class="header__menu-item list-menu__item link link--text focus-inset"
      >
        <span>FAQ</span>
      </a>
    </li>
  </ul>
</nav>
